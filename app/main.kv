#:kivy 2.2.1

ScreenManager:
    Login:
    MainMenu:
    Aspersores:
    Horarios:
    Datos:
    Historial:

<CustomPopup>:
    title: 'Terminos y Condiciones'
    size_hint: 0.7, 0.7
    auto_dismiss: False 

    ScrollView:
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: self.minimum_height
            Label:
                id: tyc_label
                text: ''
                text_size: self.width, None
                size_hint_y: None
                height: self.texture_size[1]
            GridLayout:
                size_hint_y: None
                padding: [0, dp(30), 0, 0]
                cols: 2
                Button:
                    text: 'Aceptar'
                    size_hint_y: None
                    height: '48dp'
                    on_release: root.dismiss()
                Button:
                    text: 'Salir'
                    size_hint_y: None
                    height: '48dp'
                    on_release: app.stop()

<Login>:
    name: "login"
    GridLayout:
        canvas.before:
            Color: 
                rgba: 0.25, 0.25, 0.25, 1
            Rectangle:
                pos: self.pos
                size: self.size

        cols: 1

        Label:
            text: "[b]Sistema de Riego"
            size_hint_y: None
            font_size: dp(45)
            markup: True
            padding: [0, dp(100), 0, dp(50)]
            color: 0.85, 0.85, 0.85, 1
        GridLayout:
            cols: 1
            AnchorLayout:
            
                anchor_x: 'center'
                anchor_y: 'center'
                
                GridLayout:
                    size_hint: 0.8, 0.8
                    pos_hint: {'center_x': 1}
                    spacing: dp(15)
                    cols: 1

                    Label:
                        text: "Usuario"
                        font_size: dp(25)
                        color: 0.85, 0.85, 0.85, 1
                    TextInput:
                        id: user
                        font_size: dp(22)
                        multiline: False
                        cursor_color: 0,0,0,1
                        color: 0.85, 0.85, 0.85, 1
                    Label:
                        text: "Contraseña"
                        font_size: dp(25)
                        color: 0.85, 0.85, 0.85, 1
                    TextInput:
                        id: pwd
                        password: True
                        font_size: dp(22)
                        multiline: False
                        cursor_color: 0,0,0,1
                        color: 0.85, 0.85, 0.85, 1
        GridLayout:
            cols: 1
            spacing: '20dp'
            size_hint: 1, 0.4

            Button:
                text: "[b]INGRESAR[/b]"
                font_size: self.height / 2
                markup: True
                on_release: root.check()
                background_normal: ''
                background_color: 0.52, 0.95, 0.61, 1
                color: 0,0,0,1
            Button:
                text: "[b]SALIR[/b]"
                font_size: self.height / 2
                markup: True
                on_release: root.check()
                background_normal: ''
                background_color: 1.0, 0.33, 0.33, 1
                color: 0,0,0,1

        GridLayout:
            cols: 1
            size_hint: 1, 0.45
            Label:
                id:warning
                size_hint_y: None
                font_size: dp(18)
                halign: "center"
                valign: "middle"
                color: 0.85, 0.85, 0.85, 1

    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'top'
        
        Button:
            text: "[b]?[/b]"
            markup: True
            size_hint: None, None
            font_size: dp(40)
            size: '40dp', '40dp'
            background_normal: ''
            background_color: 0.25, 0.25, 0.25, 1
            color: 0.85, 0.85, 0.85, 1

    AnchorLayout:
        anchor_x: 'left'
        anchor_y: 'top'
        
        Label:
            text: "[b]INSM[/b]"
            size_hint: None, None
            size: '60dp', '30dp'
            markup: True
            font_size: dp(18)
            color: 0.85, 0.85, 0.85, 1

    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'bottom'
        
        Label:
            text: "[b]5° B | 2023[/b]"
            size_hint: None, None
            size: '100dp', '30dp'
            markup: True
            font_size: dp(18)
            color: 0.85, 0.85, 0.85, 1

<MainMenu>:
    name: "main"
    GridLayout:
        canvas.before:
            Color: 
                rgba: 0.25, 0.25, 0.25, 1
            Rectangle:
                pos: self.pos
                size: self.size

        cols: 1

        Label:
            text: "[b]Menú Principal"
            size_hint_y: None
            font_size: dp(45)
            markup: True
            padding: [0, dp(100), 0, dp(50)]
            color: 0.85, 0.85, 0.85, 1
        GridLayout:
            cols: 1
            AnchorLayout:
            
                anchor_x: 'center'
                anchor_y: 'center'
                
                GridLayout:
                    size_hint: 0.9, 0.6
                    spacing: dp(15)
                    cols: 1

                    Button:
                        text: "Control de Aspersores"
                        background_normal: ''
                        background_color: 0.85, 0.85, 0.85, 1
                        color: 0, 0, 0, 1
                        font_size: self.height / 2
                        on_release: app.root.current = 'asp'
                    Button:
                        text: "Horarios de Riego"
                        background_normal: ''
                        background_color: 0.85, 0.85, 0.85, 1
                        color: 0, 0, 0, 1
                        font_size: self.height / 2
                        on_release: app.root.current = 'hrs'
                    Button:
                        text: "Datos del Día"
                        background_normal: ''
                        background_color: 0.85, 0.85, 0.85, 1
                        color: 0, 0, 0, 1
                        font_size: self.height / 2
                        on_release: app.root.current = 'data'
                    Button:
                        text: "Historial de Riego"
                        background_normal: ''
                        background_color: 0.85, 0.85, 0.85, 1
                        color: 0, 0, 0, 1
                        font_size: self.height / 2
                        on_release: app.root.current = 'hist'
        GridLayout:
            cols: 1
            size_hint: 1, 0.25
            
            spacing: '15dp'
            padding: [0, 0, 0, self.height / 2]
            Button:
                text: "[b]SALIR[/b]"
                font_size: self.height / 2
                markup: True
                on_release: app.stop()
                background_normal: ''
                background_color: 1.0, 0.33, 0.33, 1
                color: 0,0,0,1
    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'top'
        
        Button:
            text: "[b]?[/b]"
            markup: True
            size_hint: None, None
            font_size: dp(40)
            size: '40dp', '40dp'
            background_normal: ''
            background_color: 0.25, 0.25, 0.25, 1
            color: 0.85, 0.85, 0.85, 1

    AnchorLayout:
        anchor_x: 'left'
        anchor_y: 'top'
        
        Label:
            text: "[b]INSM[/b]"
            size_hint: None, None
            size: '60dp', '30dp'
            markup: True
            font_size: dp(18)
            color: 0.85, 0.85, 0.85, 1

    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'bottom'
        
        Label:
            text: "[b]5° B | 2023[/b]"
            size_hint: None, None
            size: '100dp', '30dp'
            markup: True
            font_size: dp(18)
            color: 0.85, 0.85, 0.85, 1


<Aspersores>:
    name: "asp"
    GridLayout:
        canvas.before:
            Color: 
                rgba: 0.25, 0.25, 0.25, 1
            Rectangle:
                pos: self.pos
                size: self.size

        cols: 1
        Label:
            text: "[b]Control de\nAspersores"
            valign: 'middle'
            halign: 'center'
            size_hint_y: None
            font_size: dp(45)
            markup: True
            padding: [0, dp(100), 0, dp(50)]
            color: 0.85, 0.85, 0.85, 1
        GridLayout:
            cols: 1
            AnchorLayout:
            
                anchor_x: 'center'
                anchor_y: 'center'
                
                GridLayout:
                    size_hint: 0.9, 0.4
                    spacing: dp(35)
                    cols: 1

                    Label:
                        id:state_lbl
                        font_size: dp(30)
                        markup: True
                        color: 0.85, 0.85, 0.85, 1
                    
                    Button:
                        id: state_btn
                        text: ''
                        on_release: root.change_state()
                        background_normal: ''
                        background_color: 0.85, 0.85, 0.85, 1
                        color: 0,0,0,1 
                        font_size: self.height / 2
        GridLayout:
            cols: 1
            size_hint: 1, 0.25
            
            spacing: '15dp'
            padding: [0, 0, 0, self.height / 2]
            Button:
                text: "[b]VOLVER AL MENÚ[/b]"
                font_size: self.height / 2
                markup: True
                on_release: app.root.current = 'main'
                background_normal: ''
                background_color: 1.0, 0.33, 0.33, 1
                color: 0,0,0,1
    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'top'
        
        Button:
            text: "[b]?[/b]"
            markup: True
            size_hint: None, None
            font_size: dp(40)
            size: '40dp', '40dp'
            background_normal: ''
            background_color: 0.25, 0.25, 0.25, 1
            color: 0.85, 0.85, 0.85, 1

    AnchorLayout:
        anchor_x: 'left'
        anchor_y: 'top'
        
        Label:
            text: "[b]INSM[/b]"
            size_hint: None, None
            size: '60dp', '30dp'
            markup: True
            font_size: dp(18)
            color: 0.85, 0.85, 0.85, 1

    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'bottom'
        
        Label:
            text: "[b]5° B | 2023[/b]"
            size_hint: None, None
            size: '100dp', '30dp'
            markup: True
            font_size: dp(18)
            color: 0.85, 0.85, 0.85, 1
<Horarios>:
    name: "hrs"
    GridLayout:
        canvas.before:
            Color: 
                rgba: 0.25, 0.25, 0.25, 1
            Rectangle:
                pos: self.pos
                size: self.size

        cols: 1
        Button:
            text: 'Come Back'
            on_release: app.root.current = 'main'
<Datos>:
    name: "data"
    GridLayout:
        canvas.before:
            Color: 
                rgba: 0.25, 0.25, 0.25, 1
            Rectangle:
                pos: self.pos
                size: self.size

        cols: 1
        Button:
            text: 'Come Back'
            on_release: app.root.current = 'main'
<Historial>:
    name: "hist"
    GridLayout:
        canvas.before:
            Color: 
                rgba: 0.25, 0.25, 0.25, 1
            Rectangle:
                pos: self.pos
                size: self.size

        cols: 1
        Button:
            text: 'Come Back'
            on_release: app.root.current = 'main'